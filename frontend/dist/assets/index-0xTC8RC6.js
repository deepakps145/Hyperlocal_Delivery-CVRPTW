import{j as e,S as He,R as it,T as ot,a as ct,V as dt,C as mt,b as xt,c as ht,d as ut,e as pt,f as gt,I as ft,g as bt,P as vt,h as jt,i as wt,k as yt,l as Nt,m as kt,n as St,o as Ct}from"./vendor-ui-zbWv5W8f.js";import{e as At,a as n,B as zt,f as Mt,h as Z,N as Se,u as se}from"./vendor-react-CNUErI60.js";import{t as Rt,c as Ot,a as qe,b as _t}from"./vendor-utils-CqUDeb0Q.js";import{L as he,M as Et,T as _e,a as Ee,P as Ie,b as Pe,u as It,c as Pt}from"./vendor-map-BpTR2-kG.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))l(d);new MutationObserver(d=>{for(const c of d)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function a(d){const c={};return d.integrity&&(c.integrity=d.integrity),d.referrerPolicy&&(c.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?c.credentials="include":d.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(d){if(d.ep)return;d.ep=!0;const c=a(d);fetch(d.href,c)}})();var me={},De;function Dt(){if(De)return me;De=1;var t=At();return me.createRoot=t.createRoot,me.hydrateRoot=t.hydrateRoot,me}var Lt=Dt();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$t=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,a,l)=>l?l.toUpperCase():a.toLowerCase()),Le=t=>{const s=$t(t);return s.charAt(0).toUpperCase()+s.slice(1)},Ue=(...t)=>t.filter((s,a,l)=>!!s&&s.trim()!==""&&l.indexOf(s)===a).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=n.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:d="",children:c,iconNode:h,...g},A)=>n.createElement("svg",{ref:A,...Wt,width:s,height:s,stroke:t,strokeWidth:l?Number(a)*24/Number(s):a,className:Ue("lucide",d),...g},[...h.map(([b,S])=>n.createElement(b,S)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=(t,s)=>{const a=n.forwardRef(({className:l,...d},c)=>n.createElement(Ft,{ref:c,iconNode:s,className:Ue(`lucide-${Tt(Le(t))}`,`lucide-${t}`,l),...d}));return a.displayName=Le(t),a};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ge=j("arrow-left",Bt);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Te=j("arrow-right",Ht);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]],ne=j("bike",qt);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],$e=j("building-2",Ut);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Gt=j("check",Vt);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ue=j("chevron-down",Jt);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Xt=j("chevron-up",Qt);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Yt=j("circle-alert",Kt);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ve=j("circle-check",Zt);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ce=j("circle-x",es);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],ss=j("clock",ts);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],fe=j("eye-off",as);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],oe=j("eye",rs);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],ns=j("grip-horizontal",ls);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],be=j("loader-circle",is);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}]],cs=j("locate",os);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],xe=j("map-pin",ds);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],xs=j("menu",ms);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],pe=j("navigation",hs);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],re=j("package",us);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],gs=j("plus",ps);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ae=j("refresh-cw",fs);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],le=j("route",bs);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ge=j("shield-check",vs);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],We=j("sparkles",js);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],ze=j("timer",ws);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ns=j("trash-2",ys);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Ss=j("trending-up",ks);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],As=j("truck",Cs);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Me=j("x",zs);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Rs=j("zap",Ms);function D(...t){return Rt(Ot(t))}const Os=qe("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function y({className:t,variant:s,size:a,asChild:l=!1,...d}){const c=l?He:"button";return e.jsx(c,{"data-slot":"button",className:D(Os({variant:s,size:a,className:t})),...d})}function L({className:t,...s}){return e.jsx("div",{"data-slot":"card",className:D("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...s})}function _s({onNavigate:t}){return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 overflow-x-hidden",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-1/4 -left-20 w-96 h-96 bg-emerald-500/10 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/4 -right-20 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),e.jsx("header",{className:"relative z-10 container mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-blue-500 rounded-xl flex items-center justify-center shadow-lg shadow-emerald-500/20",children:e.jsx(le,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"text-xl font-bold text-white",children:"GraphHopper"})]}),e.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[e.jsx(y,{variant:"ghost",onClick:()=>t("admin-login"),className:"text-slate-300 hover:text-white",children:"Admin Login"}),e.jsx(y,{onClick:()=>t("rider-login"),className:"bg-emerald-500 hover:bg-emerald-600 text-white",children:"Rider Login"})]})]})}),e.jsx("section",{className:"relative z-10 container mx-auto px-4 sm:px-6 lg:px-8 pt-8 sm:pt-12 lg:pt-16 pb-12 sm:pb-16",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 lg:gap-12 items-center",children:[e.jsxs("div",{className:"space-y-6 text-center lg:text-left animate-fade-in",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-500/10 border border-emerald-500/20 rounded-full",children:[e.jsx(Rs,{className:"w-4 h-4 text-emerald-400"}),e.jsx("span",{className:"text-emerald-400 text-xs sm:text-sm font-medium",children:"TSP Algorithm Powered"})]}),e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-white leading-tight",children:["Hyperlocal Delivery",e.jsx("br",{}),e.jsx("span",{className:"bg-gradient-to-r from-emerald-400 to-blue-400 bg-clip-text text-transparent",children:"Route Optimization"})]}),e.jsx("p",{className:"text-base sm:text-lg lg:text-xl text-slate-400 max-w-xl mx-auto lg:mx-0",children:"Intelligent order grouping and route optimization using the Travelling Salesman Problem algorithm. Minimize delivery time and maximize efficiency."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center lg:justify-start",children:[e.jsxs(y,{onClick:()=>t("admin-login"),className:"bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white shadow-lg shadow-emerald-500/30 h-12 px-6 text-base",children:[e.jsx($e,{className:"w-5 h-5 mr-2"}),"Admin Dashboard"]}),e.jsxs(y,{onClick:()=>t("rider-login"),variant:"outline",className:"border-slate-700 bg-slate-800/50 text-white hover:bg-slate-800 h-12 px-6 text-base",children:[e.jsx(ne,{className:"w-5 h-5 mr-2"}),"Rider App"]})]})]}),e.jsxs("div",{className:"relative h-[280px] sm:h-[350px] lg:h-[450px] animate-scale-up",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-emerald-500/20 to-blue-500/20 rounded-3xl blur-3xl"}),e.jsx("div",{className:"relative h-full flex items-center justify-center",children:e.jsx(Es,{})})]})]})}),e.jsxs("section",{className:"relative z-10 container mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-16 lg:py-20",children:[e.jsxs("div",{className:"text-center mb-10 sm:mb-12",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-3",children:"Intelligent Route Planning"}),e.jsx("p",{className:"text-slate-400 max-w-2xl mx-auto text-sm sm:text-base",children:"Our system uses advanced algorithms to optimize delivery routes in real-time"})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[e.jsxs(L,{className:"bg-slate-900/50 border-slate-800 p-5 sm:p-6 hover:border-emerald-500/30 transition-all group",children:[e.jsx("div",{className:"w-12 h-12 bg-emerald-500/20 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:e.jsx(le,{className:"w-6 h-6 text-emerald-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"TSP Algorithm"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Optimal route calculation using Travelling Salesman Problem solver"})]}),e.jsxs(L,{className:"bg-slate-900/50 border-slate-800 p-5 sm:p-6 hover:border-blue-500/30 transition-all group",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:e.jsx(xe,{className:"w-6 h-6 text-blue-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Live Tracking"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Real-time GPS tracking of all riders and deliveries"})]}),e.jsxs(L,{className:"bg-slate-900/50 border-slate-800 p-5 sm:p-6 hover:border-purple-500/30 transition-all group",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-500/20 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:e.jsx(ss,{className:"w-6 h-6 text-purple-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Time Windows"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Respect delivery time constraints and priorities"})]}),e.jsxs(L,{className:"bg-slate-900/50 border-slate-800 p-5 sm:p-6 hover:border-amber-500/30 transition-all group",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-500/20 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:e.jsx(Ss,{className:"w-6 h-6 text-amber-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Analytics"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Performance metrics and delivery statistics"})]})]})]}),e.jsx("section",{className:"relative z-10 container mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-16",children:e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4 sm:gap-6 max-w-4xl mx-auto",children:[e.jsxs(L,{className:"relative bg-gradient-to-br from-emerald-500/10 to-emerald-600/5 border-emerald-500/30 p-6 sm:p-8 hover:border-emerald-400/50 transition-all group overflow-hidden cursor-pointer",onClick:()=>t("admin-login"),children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500/0 to-emerald-500/10 opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsxs("div",{className:"relative space-y-4",children:[e.jsx("div",{className:"w-14 h-14 bg-emerald-500/20 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx($e,{className:"w-7 h-7 text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl sm:text-2xl text-white mb-2 font-semibold",children:"Fleet Admin"}),e.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Manage orders, riders, and optimize delivery routes"})]}),e.jsxs("div",{className:"flex items-center text-emerald-400 text-sm font-medium group-hover:gap-2 transition-all",children:[e.jsx("span",{children:"Access Dashboard"}),e.jsx(Te,{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"})]})]})]}),e.jsxs(L,{className:"relative bg-gradient-to-br from-blue-500/10 to-blue-600/5 border-blue-500/30 p-6 sm:p-8 hover:border-blue-400/50 transition-all group overflow-hidden cursor-pointer",onClick:()=>t("rider-login"),children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/0 to-blue-500/10 opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsxs("div",{className:"relative space-y-4",children:[e.jsx("div",{className:"w-14 h-14 bg-blue-500/20 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx(ne,{className:"w-7 h-7 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl sm:text-2xl text-white mb-2 font-semibold",children:"Delivery Partner"}),e.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"View assigned orders and optimized delivery routes"})]}),e.jsxs("div",{className:"flex items-center text-blue-400 text-sm font-medium group-hover:gap-2 transition-all",children:[e.jsx("span",{children:"Open Rider App"}),e.jsx(Te,{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"})]})]})]})]})}),e.jsx("footer",{className:"relative z-10 container mx-auto px-4 sm:px-6 lg:px-8 py-8 border-t border-slate-800",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5 text-emerald-400"}),e.jsx("span",{className:"text-slate-400 text-sm",children:"GraphHopper - Hyperlocal Delivery CVRPTW"})]}),e.jsx("p",{className:"text-slate-500 text-xs",children:"Powered by GraphHopper Route Optimization"})]})})]})}function Es(){return e.jsxs("svg",{viewBox:"0 0 400 400",className:"w-full h-full max-w-md",children:[e.jsxs("defs",{children:[e.jsxs("filter",{id:"glow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[e.jsx("feGaussianBlur",{stdDeviation:"4",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("linearGradient",{id:"routeGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#10b981"}),e.jsx("stop",{offset:"100%",stopColor:"#3b82f6"})]})]}),e.jsx("circle",{cx:"200",cy:"200",r:"180",fill:"rgba(16, 185, 129, 0.05)",stroke:"rgba(16, 185, 129, 0.1)",strokeWidth:"2"}),e.jsx("circle",{cx:"200",cy:"200",r:"140",fill:"rgba(59, 130, 246, 0.05)",stroke:"rgba(59, 130, 246, 0.1)",strokeWidth:"2"}),e.jsx("circle",{cx:"200",cy:"200",r:"100",fill:"rgba(139, 92, 246, 0.05)",stroke:"rgba(139, 92, 246, 0.1)",strokeWidth:"2"}),e.jsx("g",{filter:"url(#glow)",children:e.jsx("path",{d:"M 100 280 Q 150 200 200 180 Q 250 160 300 200 Q 320 240 280 300",fill:"none",stroke:"url(#routeGradient)",strokeWidth:"3",strokeLinecap:"round",strokeDasharray:"8 4",children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"0",to:"24",dur:"1s",repeatCount:"indefinite"})})}),e.jsxs("g",{children:[e.jsx("circle",{cx:"100",cy:"280",r:"14",fill:"rgba(16, 185, 129, 0.3)"}),e.jsx("circle",{cx:"100",cy:"280",r:"10",fill:"#10b981"}),e.jsx("text",{x:"100",y:"284",textAnchor:"middle",fill:"white",fontSize:"10",fontWeight:"bold",children:"W"}),e.jsx("circle",{cx:"200",cy:"180",r:"12",fill:"rgba(59, 130, 246, 0.3)"}),e.jsx("circle",{cx:"200",cy:"180",r:"8",fill:"#3b82f6"}),e.jsx("text",{x:"200",y:"184",textAnchor:"middle",fill:"white",fontSize:"10",fontWeight:"bold",children:"1"}),e.jsx("circle",{cx:"300",cy:"200",r:"12",fill:"rgba(139, 92, 246, 0.3)"}),e.jsx("circle",{cx:"300",cy:"200",r:"8",fill:"#8b5cf6"}),e.jsx("text",{x:"300",y:"204",textAnchor:"middle",fill:"white",fontSize:"10",fontWeight:"bold",children:"2"}),e.jsx("circle",{cx:"280",cy:"300",r:"12",fill:"rgba(245, 158, 11, 0.3)"}),e.jsx("circle",{cx:"280",cy:"300",r:"8",fill:"#f59e0b"}),e.jsx("text",{x:"280",y:"304",textAnchor:"middle",fill:"white",fontSize:"10",fontWeight:"bold",children:"3"})]}),e.jsxs("g",{transform:"translate(175, 225)",children:[e.jsx("circle",{cx:"25",cy:"25",r:"28",fill:"rgba(16, 185, 129, 0.2)"}),e.jsx("circle",{cx:"25",cy:"25",r:"20",fill:"#10b981"}),e.jsx("path",{d:"M17 28 L25 20 L33 28 L29 28 L29 32 L21 32 L21 28 Z",fill:"white"}),e.jsx("circle",{cx:"25",cy:"25",r:"4",fill:"white",fillOpacity:"0.5"})]}),e.jsx("text",{x:"100",y:"310",textAnchor:"middle",fill:"rgba(148, 163, 184, 0.8)",fontSize:"10",children:"Origin"}),e.jsx("text",{x:"280",y:"330",textAnchor:"middle",fill:"rgba(148, 163, 184, 0.8)",fontSize:"10",children:"Delivery"})]})}const Is=qe("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function ae({className:t,variant:s,asChild:a=!1,...l}){const d=a?He:"span";return e.jsx(d,{"data-slot":"badge",className:D(Is({variant:s}),t),...l})}function Je({className:t,...s}){return e.jsx(it,{"data-slot":"switch",className:D("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(ot,{"data-slot":"switch-thumb",className:D("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function Qe({className:t,children:s,...a}){return e.jsxs(ct,{"data-slot":"scroll-area",className:D("relative",t),...a,children:[e.jsx(dt,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:s}),e.jsx(Ps,{}),e.jsx(mt,{})]})}function Ps({className:t,orientation:s="vertical",...a}){return e.jsx(xt,{"data-slot":"scroll-area-scrollbar",orientation:s,className:D("flex touch-none p-px transition-colors select-none",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",t),...a,children:e.jsx(ht,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}const Ds="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",Ls="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC",Ts=()=>he.divIcon({html:`
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" width="48" height="48">
      <defs>
        <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
          <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#000" flood-opacity="0.3"/>
        </filter>
      </defs>
      <circle cx="32" cy="32" r="28" fill="#10b981" filter="url(#shadow)"/>
      <circle cx="32" cy="32" r="24" fill="#059669"/>
      <circle cx="32" cy="24" r="8" fill="white"/>
      <path d="M20 42 Q32 34 44 42 Q44 50 32 52 Q20 50 20 42" fill="white"/>
      <circle cx="32" cy="32" r="4" fill="#059669"/>
    </svg>
  `,className:"rider-marker",iconSize:[48,48],iconAnchor:[24,24],popupAnchor:[0,-24]}),$s=(t,s)=>{const a=s==="in-transit"?"#8b5cf6":s==="assigned"?"#3b82f6":"#64748b",l=`
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 50" width="32" height="40">
      <defs>
        <filter id="ordershadow" x="-20%" y="-20%" width="140%" height="140%">
          <feDropShadow dx="0" dy="2" stdDeviation="2" flood-color="#000" flood-opacity="0.25"/>
        </filter>
      </defs>
      <path d="M20 0 C30 0 38 8 38 18 C38 32 20 50 20 50 C20 50 2 32 2 18 C2 8 10 0 20 0" fill="${a}" filter="url(#ordershadow)"/>
      <circle cx="20" cy="18" r="12" fill="white"/>
      <text x="20" y="23" text-anchor="middle" fill="${a}" font-size="14" font-weight="bold" font-family="system-ui">${t}</text>
    </svg>
  `;return he.divIcon({html:l,className:"order-marker",iconSize:[32,40],iconAnchor:[16,40],popupAnchor:[0,-40]})};function Ws({center:t,zoom:s}){const a=It();return n.useEffect(()=>{a.setView(t,s)},[t,s,a]),null}function Fs({onClick:t}){return Pt({click(s){t&&t([s.latlng.lat,s.latlng.lng])}}),null}function Xe({orders:t=[],riders:s=[],route:a,center:l=[20.5937,78.9629],zoom:d=5,showTraffic:c=!1,onMapClick:h}){n.useEffect(()=>{const r=he.icon({iconUrl:Ds,shadowUrl:Ls,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]});he.Marker.prototype.options.icon=r},[]);const g=n.useMemo(()=>{if(!a)return[];try{if(a.points&&typeof a.points=="object"&&Array.isArray(a.points.coordinates))return a.points.coordinates.map(r=>[r[1],r[0]]);if(Array.isArray(a.points)&&a.points.length>0){const r=a.points[0];if(Array.isArray(r))return a.points}if(typeof a.points=="string")return A(a.points)}catch(r){console.error("Error parsing route points:",r)}return[]},[a]);function A(r){if(!r)return[];const u=[];let w=0,v=r.length,m=0,C=0;for(;w<v;){let x,N=0,O=0;do x=r.charCodeAt(w++)-63,O|=(x&31)<<N,N+=5;while(x>=32);const H=O&1?~(O>>1):O>>1;m+=H,N=0,O=0;do x=r.charCodeAt(w++)-63,O|=(x&31)<<N,N+=5;while(x>=32);const T=O&1?~(O>>1):O>>1;C+=T,u.push([m/1e5,C/1e5])}return u}const b=(t||[]).map(r=>{var v,m,C,x;const u=r.lat??r.latitude??((v=r.location)==null?void 0:v.lat)??((m=r.coords)==null?void 0:m.lat),w=r.lng??r.longitude??((C=r.location)==null?void 0:C.lng)??((x=r.coords)==null?void 0:x.lng);return u==null||w==null?null:{...r,_pos:[Number(u),Number(w)]}}).filter(Boolean),S=(s||[]).map(r=>{var v,m;const u=r.current_lat??r.lat??r.latitude??((v=r.location)==null?void 0:v.lat),w=r.current_lng??r.lng??r.longitude??((m=r.location)==null?void 0:m.lng);return u==null||w==null?null:{...r,_pos:[Number(u),Number(w)]}}).filter(Boolean);return e.jsx("div",{className:"h-full w-full min-h-[300px]",children:e.jsxs(Et,{center:l,zoom:d,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[e.jsx(Ws,{center:l,zoom:d}),e.jsx(_e,{attribution:'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),c&&e.jsx(_e,{url:"https://mt0.google.com/vt/lyrs=m,traffic&x={x}&y={y}&z={z}",attribution:"Â© Google Maps"}),b.map((r,u)=>e.jsx(Ee,{position:r._pos,icon:$s(r.displayIndex??u+1,r.status),eventHandlers:{click:()=>{h&&h(r._pos)}},opacity:r.isAvailable?.7:1,children:e.jsx(Ie,{children:e.jsxs("div",{className:"min-w-[150px]",children:[e.jsxs("p",{className:"font-bold text-base mb-1",children:["Order #",r.id??"â€”"]}),r.isAvailable&&e.jsx("p",{className:"text-green-600 font-bold text-sm mb-1",children:"ðŸ“¦ Available to Pick!"}),r.customer_name&&e.jsxs("p",{className:"text-sm mb-1",children:["ðŸ‘¤ ",r.customer_name]}),r.status&&e.jsxs("p",{className:`text-sm font-medium ${r.status==="in-transit"?"text-purple-600":r.status==="assigned"?"text-blue-600":"text-gray-600"}`,children:["ðŸ“ ",r.status]}),r.delivery_address&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r.delivery_address}),r.distance!==void 0&&r.distance!==null&&e.jsxs("p",{className:"text-xs text-blue-600 mt-1 font-medium",children:["ðŸš— ",r.distance.toFixed(1)," km away"]})]})})},r.id??`order-${u}`)),S.map((r,u)=>e.jsx(Ee,{position:r._pos,icon:r.isCurrentRider?Ts():void 0,children:e.jsx(Ie,{children:e.jsxs("div",{className:"min-w-[120px]",children:[e.jsxs("p",{className:"font-bold text-base mb-1",children:["ðŸï¸ ",r.name??`Rider ${r.id}`]}),e.jsx("p",{className:`text-sm font-medium ${r.status==="busy"?"text-amber-600":r.status==="available"?"text-green-600":"text-gray-500"}`,children:r.status==="busy"?"ðŸ”´ On Delivery":r.status==="available"?"ðŸŸ¢ Available":"âš« "+(r.status??"Unknown")})]})})},r.id??`rider-${u}`)),g.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Pe,{positions:g,pathOptions:{color:"#3b82f6",weight:8,opacity:.3,lineCap:"round",lineJoin:"round"}}),e.jsx(Pe,{positions:g,pathOptions:{color:"#3b82f6",weight:4,opacity:.9,lineCap:"round",lineJoin:"round",dashArray:void 0}})]}),e.jsx(Fs,{onClick:h})]})})}function P({className:t,type:s,...a}){return e.jsx("input",{type:s,"data-slot":"input",className:D("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...a})}function _({className:t,...s}){return e.jsx(ut,{"data-slot":"label",className:D("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}function Bs({...t}){return e.jsx(pt,{"data-slot":"select",...t})}function Hs({...t}){return e.jsx(bt,{"data-slot":"select-value",...t})}function qs({className:t,size:s="default",children:a,...l}){return e.jsxs(gt,{"data-slot":"select-trigger","data-size":s,className:D("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l,children:[a,e.jsx(ft,{asChild:!0,children:e.jsx(ue,{className:"size-4 opacity-50"})})]})}function Us({className:t,children:s,position:a="popper",...l}){return e.jsx(vt,{children:e.jsxs(jt,{"data-slot":"select-content",className:D("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a,...l,children:[e.jsx(Vs,{}),e.jsx(wt,{className:D("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(Gs,{})]})})}function Ne({className:t,children:s,...a}){return e.jsxs(yt,{"data-slot":"select-item",className:D("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...a,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(Nt,{children:e.jsx(Gt,{className:"size-4"})})}),e.jsx(kt,{children:s})]})}function Vs({className:t,...s}){return e.jsx(St,{"data-slot":"select-scroll-up-button",className:D("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Xt,{className:"size-4"})})}function Gs({className:t,...s}){return e.jsx(Ct,{"data-slot":"select-scroll-down-button",className:D("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(ue,{className:"size-4"})})}const Js="http://localhost:8000",I=_t.create({baseURL:Js,headers:{"Content-Type":"application/json"}});I.interceptors.request.use(t=>{const s=localStorage.getItem("token");return s&&(t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t));I.interceptors.response.use(t=>t,t=>{var s;return((s=t.response)==null?void 0:s.status)===401&&(console.log("API: 401 error - clearing auth data"),localStorage.removeItem("token"),localStorage.removeItem("user")),Promise.reject(t)});const Ke=async t=>(await I.post("/login",t)).data,Ye=async t=>(await I.post("/signup",t)).data,ke=async()=>(await I.get("/orders/")).data,Qs=async t=>(await I.post(`/orders/${t}/pick`)).data,Xs=async t=>(await I.post(`/riders/${t}/pick-all`)).data,Fe=async()=>(await I.get("/users/?role=rider")).data,Ks=async t=>(await I.post("/orders/",t)).data,Ys=async t=>(await I.get(`/riders/${t}/orders`)).data,Ze=async(t,s=!1)=>(await I.post(`/optimize/${t}?avoid_traffic=${s}`)).data,Zs=async(t,s,a)=>(await I.put(`/riders/${t}/location`,{lat:s,lng:a})).data,ea=async()=>(await I.post("/orders/auto-assign")).data,et=async t=>(await I.post(`/orders/${t}/cancel`)).data,ta=async t=>(await I.delete(`/orders/${t}`)).data,sa=async(t,s)=>(await I.put(`/orders/${t}/status?status=${s}`)).data;function aa({isOpen:t,onClose:s,onOrderCreated:a,selectedLocation:l}){const[d,c]=n.useState(""),[h,g]=n.useState(""),[A,b]=n.useState("2"),[S,r]=n.useState("1.0"),[u,w]=n.useState(""),[v,m]=n.useState(""),[C,x]=n.useState(!1),[N,O]=n.useState({x:100,y:100}),[H,T]=n.useState(!1),[W,M]=n.useState({x:0,y:0}),ee=n.useRef(null);n.useEffect(()=>{if(t){O({x:window.innerWidth/2-300,y:100});const z=new Date,U=new Date(z.getTime()-z.getTimezoneOffset()*6e4).toISOString().slice(0,16);w(U)}},[t]);const R=z=>{ee.current&&(T(!0),M({x:z.clientX-N.x,y:z.clientY-N.y}))},q=z=>{H&&O({x:z.clientX-W.x,y:z.clientY-W.y})},Y=()=>{T(!1)};n.useEffect(()=>(H?(window.addEventListener("mousemove",q),window.addEventListener("mouseup",Y)):(window.removeEventListener("mousemove",q),window.removeEventListener("mouseup",Y)),()=>{window.removeEventListener("mousemove",q),window.removeEventListener("mouseup",Y)}),[H]);const $=async z=>{var U,V;if(z.preventDefault(),!l){alert("Please select delivery location on the map (click on the background map)");return}x(!0);try{const G={customer_name:d,delivery_address:h,lat:l.lat,lng:l.lng,priority:parseInt(A),weight:parseFloat(S),delivery_time_start:u?new Date(u).toISOString():null,delivery_time_end:v?new Date(v).toISOString():null};await Ks(G),alert("Order created successfully!"),a(),B()}catch(G){console.error("Error creating order:",G),alert(`Failed to create order: ${((V=(U=G.response)==null?void 0:U.data)==null?void 0:V.detail)||G.message}`)}finally{x(!1)}},B=()=>{c(""),g(""),b("2"),r("1.0"),w(""),m(""),s()};return t?e.jsx("div",{className:"fixed inset-0 z-[2000] pointer-events-none",children:e.jsxs("div",{ref:ee,className:"absolute bg-slate-900 border border-slate-700 rounded-lg shadow-2xl pointer-events-auto flex flex-col w-[600px] max-h-[80vh]",style:{left:N.x,top:N.y},children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-800 cursor-move bg-slate-800/50 rounded-t-lg",onMouseDown:R,children:[e.jsxs("div",{className:"flex items-center gap-2 text-white font-semibold",children:[e.jsx(ns,{className:"w-5 h-5 text-slate-400"}),"Create New Order"]}),e.jsx(y,{variant:"ghost",size:"icon",onClick:B,className:"text-slate-400 hover:text-white",children:e.jsx(Me,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:e.jsxs("form",{onSubmit:$,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"customerName",className:"text-slate-300",children:"Customer Name"}),e.jsx(P,{id:"customerName",value:d,onChange:z=>c(z.target.value),required:!0,className:"bg-slate-800 border-slate-700 text-white",placeholder:"Enter customer name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"deliveryAddress",className:"text-slate-300",children:"Delivery Address"}),e.jsx(P,{id:"deliveryAddress",value:h,onChange:z=>g(z.target.value),required:!0,className:"bg-slate-800 border-slate-700 text-white",placeholder:"Enter delivery address"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"priority",className:"text-slate-300",children:"Priority"}),e.jsxs(Bs,{value:A,onValueChange:b,children:[e.jsx(qs,{className:"bg-slate-800 border-slate-700 text-white",children:e.jsx(Hs,{})}),e.jsxs(Us,{className:"bg-slate-800 border-slate-700 text-white",children:[e.jsx(Ne,{value:"1",children:"High (1)"}),e.jsx(Ne,{value:"2",children:"Medium (2)"}),e.jsx(Ne,{value:"3",children:"Low (3)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"weight",className:"text-slate-300",children:"Weight (kg) - Capacity Check"}),e.jsx(P,{id:"weight",type:"number",step:"0.1",min:"0.1",value:S,onChange:z=>r(z.target.value),required:!0,className:"bg-slate-800 border-slate-700 text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"timeWindowStart",className:"text-slate-300",children:"Delivery Window Start"}),e.jsx(P,{id:"timeWindowStart",type:"datetime-local",value:u,onChange:z=>w(z.target.value),className:"bg-slate-800 border-slate-700 text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"timeWindowEnd",className:"text-slate-300",children:"Delivery Window End"}),e.jsx(P,{id:"timeWindowEnd",type:"datetime-local",value:v,onChange:z=>m(z.target.value),className:"bg-slate-800 border-slate-700 text-white"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{className:"text-slate-300",children:"Delivery Location"}),e.jsx("div",{className:"p-4 rounded-lg border border-slate-700 bg-slate-800/50 text-center",children:l?e.jsxs("div",{className:"text-emerald-400",children:["Selected: ",l.lat.toFixed(6),", ",l.lng.toFixed(6)]}):e.jsx("div",{className:"text-slate-400",children:"Click on the background map to select a location"})})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t border-slate-800",children:[e.jsx(y,{type:"button",variant:"outline",onClick:B,className:"border-slate-700 text-slate-300 hover:bg-slate-800",children:"Cancel"}),e.jsx(y,{type:"submit",disabled:C||!l,className:"bg-emerald-500 hover:bg-emerald-600 text-white",children:C?"Creating...":"Create Order"})]})]})})]})}):null}function ra(t){const[s,a]=n.useState(!1),[l,d]=n.useState(null),c=n.useRef(null),h=n.useRef(null),g=()=>{try{const b=localStorage.getItem("token");if(!b)return;c.current&&c.current.close(),c.current=new WebSocket(`${t}?token=${b}`),c.current.onopen=()=>{console.log("WebSocket connected"),a(!0),h.current&&(clearTimeout(h.current),h.current=null)},c.current.onmessage=S=>{try{const r=JSON.parse(S.data);d(r)}catch(r){console.error("Error parsing WebSocket message:",r)}},c.current.onclose=()=>{console.log("WebSocket disconnected"),a(!1),h.current=setTimeout(()=>{console.log("Attempting to reconnect..."),g()},3e3)},c.current.onerror=S=>{console.error("WebSocket error:",S)}}catch(b){console.error("Error connecting to WebSocket:",b)}};return n.useEffect(()=>(g(),()=>{h.current&&clearTimeout(h.current),c.current&&c.current.close()}),[t]),{isConnected:s,sendMessage:b=>{c.current&&c.current.readyState===WebSocket.OPEN?c.current.send(JSON.stringify(b)):console.warn("WebSocket is not connected")},lastMessage:l}}function la({onBack:t}){const[s,a]=n.useState("map"),[l,d]=n.useState("all"),[c,h]=n.useState(!1),[g,A]=n.useState(!0),[b,S]=n.useState(!1),[r,u]=n.useState(!0),[w,v]=n.useState(!0),[m,C]=n.useState([]),[x,N]=n.useState([]),[O,H]=n.useState(null),[T,W]=n.useState(null),[M,ee]=n.useState(!1),[R,q]=n.useState(!1),[Y,$]=n.useState(null),[B,z]=n.useState(!0),[U,V]=n.useState(null),[G,ie]=n.useState(!1),{isConnected:ve,lastMessage:E}=ra("ws://localhost:8000/ws");n.useEffect(()=>{E&&(console.log("WebSocket message received:",E),(E.type==="order_cancelled"||E.type==="order_update"||E.type==="order_assigned"||E.type==="order_deleted")&&J(),E.type==="rider_update"&&N(i=>i.map(f=>f.id===E.data.rider_id?{...f,current_lat:E.data.lat,current_lng:E.data.lng}:f)),E.type==="route_updated"&&E.data.rider_id===O&&W(E.data.route))},[E,O]);const J=async()=>{try{const i=await ke();C(i)}catch(i){console.error("Error fetching orders:",i)}},je=async()=>{try{const i=await Fe();N(i)}catch(i){console.error("Error fetching riders:",i)}};n.useEffect(()=>{const i=async()=>{var k;try{console.log("AdminDashboard: Fetching data...");const F=new Promise((wa,nt)=>setTimeout(()=>nt(new Error("Request timeout - Backend may not be running")),1e4)),K=Promise.all([ke(),Fe()]),[Re,Oe]=await Promise.race([K,F]);console.log("AdminDashboard: Fetched orders:",Re.length,"riders:",Oe.length),C(Re),N(Oe),V(null)}catch(F){if(console.error("AdminDashboard: Error fetching data:",F),((k=F.response)==null?void 0:k.status)===401){V("Session expired. Redirecting to login..."),setTimeout(()=>t(),1500);return}V(F.message||"Failed to load data. Please check if the backend server is running.")}finally{z(!1)}};i();const f=setInterval(i,3e4);return()=>clearInterval(f)},[]);const te=async()=>{ie(!0),await Promise.all([J(),je()]),setTimeout(()=>ie(!1),500)},we=async()=>{var i,f;ee(!0);try{const k=await ea();console.log("Auto-assign result:",k),await Promise.all([J(),je()]),alert(`Successfully assigned ${k.assigned||0} orders to ${k.riders_used||0} riders`)}catch(k){console.error("Error auto-assigning orders:",k),alert(`Error: ${((f=(i=k.response)==null?void 0:i.data)==null?void 0:f.detail)||k.message}`)}finally{ee(!1)}},ye=async()=>{try{const i=await ke();C(i)}catch(i){console.error("Error refreshing orders:",i)}},o=async(i,f)=>{var k,F;if(f==null||f.stopPropagation(),!!confirm("Are you sure you want to cancel this order?"))try{await et(i),await J()}catch(K){console.error("Error cancelling order:",K),alert(`Failed to cancel order: ${((F=(k=K.response)==null?void 0:k.data)==null?void 0:F.detail)||K.message}`)}},p=async(i,f)=>{var k,F;if(f==null||f.stopPropagation(),!!confirm("Are you sure you want to permanently delete this order? This action cannot be undone."))try{await ta(i),await J()}catch(K){console.error("Error deleting order:",K),alert(`Failed to delete order: ${((F=(k=K.response)==null?void 0:k.data)==null?void 0:F.detail)||K.message}`)}},Q=async i=>{if(O===i){H(null),W(null);return}H(i);try{const f=await Ze(i,!1);W(f)}catch(f){console.log("No route available for rider",f),W(null)}},ce=i=>{R&&$({lat:i[0],lng:i[1]})},de=()=>{let i=m.filter(k=>k.status!=="delivered"&&k.status!=="cancelled"),f=x;return l==="pending"?(i=i.filter(k=>k.status==="pending"),f=[]):l==="assigned"?(i=i.filter(k=>k.status==="assigned"),f=[]):l==="in-transit"?(i=i.filter(k=>k.status==="in-transit"),f=[]):l==="riders"&&(i=[],f=x.filter(k=>k.status==="available"||k.status==="busy")),{filteredOrders:i,filteredRiders:f}},{filteredOrders:st,filteredRiders:at}=de(),rt=i=>{switch(i){case"pending":return"text-amber-400 bg-amber-500/20 border-amber-500/30";case"assigned":return"text-blue-400 bg-blue-500/20 border-blue-500/30";case"in-transit":return"text-purple-400 bg-purple-500/20 border-purple-500/30";case"delivered":return"text-emerald-400 bg-emerald-500/20 border-emerald-500/30";case"cancelled":return"text-red-400 bg-red-500/20 border-red-500/30";default:return"text-slate-400 bg-slate-500/20 border-slate-500/30"}},lt=i=>{switch(i){case"pending":return e.jsx(ze,{className:"w-3 h-3"});case"assigned":return e.jsx(re,{className:"w-3 h-3"});case"in-transit":return e.jsx(pe,{className:"w-3 h-3"});case"delivered":return e.jsx(Ve,{className:"w-3 h-3"});case"cancelled":return e.jsx(Ce,{className:"w-3 h-3"});default:return e.jsx(Yt,{className:"w-3 h-3"})}},X={pending:m.filter(i=>i.status==="pending").length,assigned:m.filter(i=>i.status==="assigned").length,inTransit:m.filter(i=>i.status==="in-transit").length,delivered:m.filter(i=>i.status==="delivered").length,activeRiders:x.filter(i=>i.status==="available"||i.status==="busy").length,totalRiders:x.length};return B?e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#0f172a",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{width:"64px",height:"64px",border:"4px solid #10b981",borderTopColor:"transparent",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"}}),e.jsx("div",{style:{color:"white",fontSize:"20px"},children:"Loading Admin Dashboard..."}),e.jsx("div",{style:{color:"#94a3b8",fontSize:"14px",marginTop:"8px"},children:"Connecting to backend..."})]}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]}):U?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#0f172a",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:e.jsxs("div",{style:{textAlign:"center",maxWidth:"400px",padding:"32px"},children:[e.jsx("div",{style:{color:"#ef4444",fontSize:"20px",marginBottom:"16px"},children:"âš ï¸ Error"}),e.jsx("div",{style:{color:"white",marginBottom:"24px"},children:U}),e.jsx("button",{onClick:t,style:{backgroundColor:"#10b981",color:"white",padding:"8px 16px",borderRadius:"6px",border:"none",cursor:"pointer"},children:"Go Back"})]})}):e.jsxs("div",{className:"h-full w-full min-h-screen bg-slate-950 flex overflow-hidden",children:[e.jsx(y,{variant:"ghost",size:"icon",className:"fixed top-4 left-4 z-50 lg:hidden bg-slate-900 text-white hover:bg-slate-800",onClick:()=>S(!b),children:b?e.jsx(Me,{className:"w-5 h-5"}):e.jsx(xs,{className:"w-5 h-5"})}),e.jsxs("div",{className:`fixed lg:static inset-y-0 left-0 z-40 w-80 bg-slate-900/95 backdrop-blur-md border-r border-slate-800 flex flex-col transition-transform duration-300 ${b?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:[e.jsx("div",{className:"p-4 border-b border-slate-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{variant:"ghost",size:"icon",onClick:t,className:"text-slate-400 hover:text-white shrink-0",children:e.jsx(ge,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-emerald-500 to-blue-500 rounded-lg flex items-center justify-center shadow-lg",children:e.jsx(We,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"text-lg font-bold gradient-text",children:"GraphHopper"})]}),ve&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-emerald-500/20 rounded-full",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-emerald-400",children:"Live"})]})]})}),e.jsx(Qe,{className:"flex-1 custom-scrollbar",children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{onClick:()=>q(!0),className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white shadow-lg shadow-blue-500/30 h-10 transition-all hover:scale-[1.02]",children:[e.jsx(gs,{className:"w-4 h-4 mr-2"}),"Create Order"]}),e.jsxs(y,{onClick:we,disabled:M||X.pending===0,className:"w-full bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white shadow-lg shadow-emerald-500/30 h-10 disabled:opacity-50 transition-all hover:scale-[1.02]",children:[e.jsx(We,{className:`w-4 h-4 mr-2 ${M?"animate-spin":""}`}),M?"Assigning...":`Auto-Assign (${X.pending})`]}),e.jsxs(y,{variant:"outline",onClick:te,className:"w-full border-slate-700 text-slate-300 hover:bg-slate-800 h-9",children:[e.jsx(Ae,{className:`w-4 h-4 mr-2 ${G?"animate-spin":""}`}),"Refresh Data"]})]}),e.jsxs("div",{className:"border border-slate-800 rounded-xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>u(!r),className:"w-full flex items-center justify-between p-3 bg-slate-800/50 hover:bg-slate-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-sm font-medium text-white",children:"Orders"}),e.jsx(ae,{className:"bg-blue-500/20 text-blue-400 border-0 text-xs",children:m.filter(i=>i.status!=="delivered"&&i.status!=="cancelled").length})]}),e.jsx(ue,{className:`w-4 h-4 text-slate-400 transition-transform ${r?"rotate-180":""}`})]}),r&&e.jsx("div",{className:"p-2 space-y-1 max-h-64 overflow-y-auto custom-scrollbar",children:m.filter(i=>i.status!=="delivered"&&i.status!=="cancelled").length===0?e.jsx("div",{className:"text-center py-4 text-slate-500 text-sm",children:"No active orders"}):m.filter(i=>i.status!=="delivered"&&i.status!=="cancelled").map(i=>e.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/30 hover:bg-slate-800/60 transition-all cursor-pointer group",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs font-mono text-slate-400",children:["#",i.id]}),e.jsxs(ae,{className:`text-[10px] px-1.5 py-0 h-5 flex items-center gap-1 ${rt(i.status)}`,children:[lt(i.status),i.status]})]})}),e.jsx("div",{className:"text-sm text-white font-medium truncate mb-1",children:i.customer_name}),e.jsx("div",{className:"text-xs text-slate-500 truncate mb-2",children:i.delivery_address}),e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[i.status!=="cancelled"&&i.status!=="delivered"&&e.jsxs(y,{size:"sm",variant:"ghost",className:"h-7 px-2 text-xs text-amber-400 hover:text-amber-300 hover:bg-amber-500/10",onClick:f=>o(i.id,f),children:[e.jsx(Ce,{className:"w-3 h-3 mr-1"}),"Cancel"]}),e.jsxs(y,{size:"sm",variant:"ghost",className:"h-7 px-2 text-xs text-red-400 hover:text-red-300 hover:bg-red-500/10",onClick:f=>p(i.id,f),children:[e.jsx(Ns,{className:"w-3 h-3 mr-1"}),"Delete"]})]})]},i.id))})]}),e.jsxs("div",{className:"border border-slate-800 rounded-xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>v(!w),className:"w-full flex items-center justify-between p-3 bg-slate-800/50 hover:bg-slate-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4 text-emerald-400"}),e.jsx("span",{className:"text-sm font-medium text-white",children:"Riders"}),e.jsxs(ae,{className:"bg-emerald-500/20 text-emerald-400 border-0 text-xs",children:[X.activeRiders,"/",X.totalRiders]})]}),e.jsx(ue,{className:`w-4 h-4 text-slate-400 transition-transform ${w?"rotate-180":""}`})]}),w&&e.jsx("div",{className:"p-2 space-y-1 max-h-48 overflow-y-auto custom-scrollbar",children:x.length===0?e.jsx("div",{className:"text-center py-4 text-slate-500 text-sm",children:"No riders available"}):x.map(i=>e.jsxs("div",{className:`p-3 rounded-lg transition-all cursor-pointer ${O===i.id?"bg-emerald-500/20 border border-emerald-500/30":"bg-slate-800/30 hover:bg-slate-800/60"}`,onClick:()=>Q(i.id),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${i.status==="busy"?"bg-amber-500":i.status==="available"?"bg-emerald-500":"bg-slate-500"} ${i.status!=="offline"?"animate-pulse":""}`}),e.jsx("span",{className:"text-sm text-white font-medium",children:i.name})]}),e.jsxs(ae,{variant:"outline",className:"text-[10px] border-slate-600 text-slate-400",children:[m.filter(f=>f.rider_id===i.id&&f.status!=="delivered").length," orders"]})]}),O===i.id&&e.jsxs("div",{className:"mt-2 text-xs text-emerald-400 flex items-center gap-1",children:[e.jsx(oe,{className:"w-3 h-3"}),"Viewing route on map"]})]},i.id))})]}),e.jsxs("div",{className:"border border-slate-800 rounded-xl p-3 space-y-3",children:[e.jsx("div",{className:"text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Map Controls"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-300",children:"Show Traffic"}),e.jsx(Je,{checked:c,onCheckedChange:h})]})]})]})})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden backdrop-blur-sm",onClick:()=>S(!1)}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"p-3 sm:p-4 bg-slate-900/80 backdrop-blur-sm border-b border-slate-800",children:e.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:[e.jsx(L,{className:`flex-1 min-w-[100px] bg-slate-900/50 border-amber-500/30 p-2 sm:p-3 cursor-pointer transition-all ${l==="pending"?"ring-2 ring-amber-500 shadow-lg shadow-amber-500/20":"hover:bg-slate-800"}`,onClick:()=>d(l==="pending"?"all":"pending"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${l==="pending"?"bg-amber-500":"bg-amber-500/20"}`,children:e.jsx(ze,{className:`w-4 h-4 ${l==="pending"?"text-white":"text-amber-400"}`})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-white",children:X.pending}),e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-400",children:"Pending"})]})]})}),e.jsx(L,{className:`flex-1 min-w-[100px] bg-slate-900/50 border-blue-500/30 p-2 sm:p-3 cursor-pointer transition-all ${l==="assigned"?"ring-2 ring-blue-500 shadow-lg shadow-blue-500/20":"hover:bg-slate-800"}`,onClick:()=>d(l==="assigned"?"all":"assigned"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${l==="assigned"?"bg-blue-500":"bg-blue-500/20"}`,children:e.jsx(re,{className:`w-4 h-4 ${l==="assigned"?"text-white":"text-blue-400"}`})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-white",children:X.assigned}),e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-400",children:"Assigned"})]})]})}),e.jsx(L,{className:`flex-1 min-w-[100px] bg-slate-900/50 border-purple-500/30 p-2 sm:p-3 cursor-pointer transition-all ${l==="in-transit"?"ring-2 ring-purple-500 shadow-lg shadow-purple-500/20":"hover:bg-slate-800"}`,onClick:()=>d(l==="in-transit"?"all":"in-transit"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${l==="in-transit"?"bg-purple-500":"bg-purple-500/20"}`,children:e.jsx(pe,{className:`w-4 h-4 ${l==="in-transit"?"text-white":"text-purple-400"}`})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold text-white",children:X.inTransit}),e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-400",children:"In Transit"})]})]})}),e.jsx(L,{className:`flex-1 min-w-[100px] bg-slate-900/50 border-emerald-500/30 p-2 sm:p-3 cursor-pointer transition-all ${l==="riders"?"ring-2 ring-emerald-500 shadow-lg shadow-emerald-500/20":"hover:bg-slate-800"}`,onClick:()=>d(l==="riders"?"all":"riders"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${l==="riders"?"bg-emerald-500":"bg-emerald-500/20"}`,children:e.jsx(ne,{className:`w-4 h-4 ${l==="riders"?"text-white":"text-emerald-400"}`})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-lg sm:text-xl font-bold text-white",children:[X.activeRiders,e.jsxs("span",{className:"text-sm text-slate-500",children:["/",X.totalRiders]})]}),e.jsx("div",{className:"text-[10px] sm:text-xs text-slate-400",children:"Riders"})]})]})})]})}),e.jsxs("div",{className:"flex-1 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900",children:e.jsx(Xe,{orders:st,riders:at,route:T,showTraffic:c,onMapClick:ce})}),l!=="all"&&e.jsx("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-[1000]",children:e.jsxs(ae,{className:"bg-slate-900/90 backdrop-blur-sm border border-slate-700 px-3 py-1 text-sm cursor-pointer hover:bg-slate-800 transition-colors",onClick:()=>d("all"),children:["Filtering: ",l," ",e.jsx(Me,{className:"w-3 h-3 ml-2 inline"})]})})]})]}),e.jsx(aa,{isOpen:R,onClose:()=>{q(!1),$(null)},onOrderCreated:ye,selectedLocation:Y})]})}function na(t,s,a,l){const c=(a-t)*Math.PI/180,h=(l-s)*Math.PI/180,g=Math.sin(c/2)*Math.sin(c/2)+Math.cos(t*Math.PI/180)*Math.cos(a*Math.PI/180)*Math.sin(h/2)*Math.sin(h/2);return 6371*(2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)))}function ia(t,s=!1){const c=Math.ceil(t/(s?15:25)*60)+5,h=c>30?10:5,g=Math.max(c-h,1),A=c+h,b=`${g}-${A} min`;return{minutes:c,timeWindow:b}}function oa({onBack:t}){const[s,a]=n.useState(!0),[l,d]=n.useState(!1),[c,h]=n.useState(!1),[g,A]=n.useState(!0),[b,S]=n.useState(!0),[r,u]=n.useState(null),[w,v]=n.useState(!1),[m,C]=n.useState(null),[x,N]=n.useState([]),[O,H]=n.useState([]),[T,W]=n.useState(null),[M,ee]=n.useState(null),[R,q]=n.useState(null),Y=n.useRef(0),$=async()=>{if(M){v(!0);try{const o=await Ys(M.user_id);if(console.log("RiderDashboard: Fetched orders:",o),N(o),o.length>0)try{const p=await Ze(M.user_id,c);W(p)}catch(p){console.log("No route available yet",p),W(null)}else W(null)}catch(o){console.error("Error refreshing data:",o)}finally{v(!1)}}},B=n.useMemo(()=>R?x.map(o=>{const p=na(R[0],R[1],o.lat,o.lng);return{...o,distance:p}}):x.map(o=>({...o,distance:null})),[x,R]),z=n.useMemo(()=>{if(T!=null&&T.distance)return(T.distance/1e3).toFixed(1);const o=B.filter(p=>p.status==="in-transit");return o.length===0||!R?null:o.reduce((p,Q)=>p+(Q.distance||0),0).toFixed(1)},[T,B,R]);n.useEffect(()=>{if(M&&s){$();const o=setInterval($,5e3);return()=>clearInterval(o)}},[M,s,c]),n.useEffect(()=>{try{const o=localStorage.getItem("user");if(o){const p=JSON.parse(o);console.log("RiderDashboard: Loaded user:",p),ee(p)}else console.warn("RiderDashboard: No user found in localStorage"),u("No user session found. Please log in again.")}catch(o){console.error("RiderDashboard: Error loading user:",o),u("Error loading user session")}finally{S(!1)}},[]),n.useEffect(()=>{if(!M||!s)return;const o=navigator.geolocation.watchPosition(p=>{const{latitude:Q,longitude:ce}=p.coords;q([Q,ce]);const de=Date.now();de-Y.current>5e3&&(Y.current=de,Zs(M.user_id,Q,ce).catch(console.error))},p=>console.error("Location error:",p),{enableHighAccuracy:!0,timeout:1e4,maximumAge:0});return()=>navigator.geolocation.clearWatch(o)},[M,s]);const U=()=>{A(!0)},V=o=>{o.lat&&o.lng&&(q([o.lat,o.lng]),A(!0))},G=async o=>{if(window.confirm("Mark this order as delivered?")){C(o);try{await sa(o,"delivered"),await $()}catch(p){console.error("Error delivering order:",p),alert("Failed to mark as delivered")}finally{C(null)}}},ie=async o=>{try{await Qs(o),await $()}catch(p){console.error("Error picking order:",p),alert("Failed to pick order")}},ve=async o=>{if(window.confirm("Are you sure you want to cancel this order?"))try{await et(o),await $()}catch(p){console.error("Error cancelling order:",p),alert("Failed to cancel order")}},E=async()=>{if(M)try{await Xs(M.user_id),await $()}catch(o){console.error("Error picking all orders:",o),alert("Failed to pick all orders")}},J=B.filter(o=>o.status==="assigned"),te=[...B.filter(o=>o.status==="in-transit"||o.status==="picked-up"),...J].sort((o,p)=>o.distance===null?1:p.distance===null?-1:o.distance-p.distance),we=te.map((o,p)=>({...o,displayIndex:p+1})),ye=o=>{switch(o){case"in-transit":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"assigned":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"delivered":return"bg-emerald-500/20 text-emerald-400 border-emerald-500/30";default:return"bg-slate-500/20 text-slate-400 border-slate-500/30"}};return b?e.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-emerald-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("div",{className:"text-white text-xl",children:"Loading Rider Dashboard..."})]})}):r?e.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md p-8",children:[e.jsx("div",{className:"text-red-500 text-xl mb-4",children:"âš ï¸ Error"}),e.jsx("div",{className:"text-white mb-6",children:r}),e.jsx(y,{onClick:t,className:"bg-emerald-500 hover:bg-emerald-600",children:"Go Back"})]})}):e.jsxs("div",{className:"h-screen bg-slate-950 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 z-0",children:e.jsx(Xe,{orders:[...we,...O.map(o=>({...o,isAvailable:!0}))],route:g?T:null,riders:M?[{id:M.user_id,current_lat:R?R[0]:M.current_lat||12.9716,current_lng:R?R[1]:M.current_lng||77.5946,name:M.name,status:"busy",isCurrentRider:!0}]:[],center:R||void 0,zoom:15,showTraffic:l,onMapClick:o=>{const p=O.find(Q=>Math.abs(Q.lat-o[0])<.001&&Math.abs(Q.lng-o[1])<.001);p&&window.confirm(`Pick up order for ${p.customer_name}?`)&&ie(p.id)}})}),e.jsxs("div",{className:"absolute top-0 left-0 bottom-0 w-full sm:w-[380px] z-20 bg-gradient-to-b from-slate-900/98 to-slate-950/98 border-r border-slate-700/50 flex flex-col backdrop-blur-xl shadow-2xl",children:[e.jsx("div",{className:"p-3 sm:p-4 border-b border-slate-800/50 bg-slate-900/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{variant:"ghost",size:"icon",onClick:t,className:"text-slate-400 hover:text-white hover:bg-slate-800 h-9 w-9",children:e.jsx(ge,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-white font-bold text-lg",children:"Deliveries"}),e.jsx("p",{className:"text-slate-500 text-xs",children:(M==null?void 0:M.name)||"Rider"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{variant:"ghost",size:"icon",onClick:$,disabled:w,className:"text-slate-400 hover:text-white h-9 w-9",children:e.jsx(Ae,{className:`w-4 h-4 ${w?"animate-spin":""}`})}),e.jsxs("div",{className:`px-2 py-1 rounded-full text-xs flex items-center gap-1 ${s?"bg-emerald-500/20 text-emerald-400":"bg-slate-700 text-slate-400"}`,children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${s?"bg-emerald-500 animate-pulse":"bg-slate-500"}`}),s?"Online":"Offline"]})]})]})}),te.length>0&&e.jsx("div",{className:"px-4 py-3 bg-slate-800/30 border-b border-slate-800/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500/20 flex items-center justify-center",children:e.jsx(re,{className:"w-4 h-4 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold",children:te.length}),e.jsx("div",{className:"text-slate-500 text-[10px]",children:"Orders"})]})]}),z&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-500/20 flex items-center justify-center",children:e.jsx(le,{className:"w-4 h-4 text-emerald-400"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-white font-bold",children:[z," ",e.jsx("span",{className:"text-xs font-normal text-slate-400",children:"km"})]}),e.jsx("div",{className:"text-slate-500 text-[10px]",children:"Total Route"})]})]})]}),e.jsxs(y,{variant:"ghost",size:"sm",onClick:U,className:`h-8 px-3 text-xs ${g?"bg-emerald-500/20 text-emerald-400":"text-slate-400"}`,children:[e.jsx(pe,{className:"w-3 h-3 mr-1"}),g?"Route On":"Show Route"]})]})}),J.length>0&&e.jsx("div",{className:"px-4 py-3 border-b border-slate-800/50",children:e.jsxs(y,{className:"w-full bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white shadow-lg shadow-emerald-500/20 h-10 transition-all hover:scale-[1.01]",onClick:E,children:[e.jsx(As,{className:"w-4 h-4 mr-2"}),"Pick Up All ",J.length," Orders"]})}),e.jsx(Qe,{className:"flex-1 custom-scrollbar",children:e.jsx("div",{className:"p-4 space-y-3",children:te.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-800 rounded-2xl flex items-center justify-center mb-4",children:e.jsx(re,{className:"w-8 h-8 text-slate-600"})}),e.jsx("h3",{className:"text-white text-lg font-medium mb-2",children:"No Active Orders"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Wait for new assignments..."})]}):te.map((o,p)=>e.jsxs("div",{className:`bg-slate-800/40 rounded-xl border transition-all hover:bg-slate-800/60 ${o.status==="in-transit"?"border-purple-500/30":"border-slate-700/50"}`,children:[e.jsxs("div",{className:"p-4 pb-3",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${o.status==="in-transit"?"bg-purple-500 text-white":"bg-slate-700 text-slate-300"}`,children:p+1}),e.jsxs("span",{className:"text-slate-400 text-xs font-mono",children:["#",o.id]})]}),e.jsx(ae,{className:`text-[10px] px-2 py-0.5 border ${ye(o.status)}`,children:o.status==="in-transit"?"In Transit":o.status})]}),e.jsx("h3",{className:"text-white font-semibold mb-1",children:o.customer_name}),e.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[e.jsx(xe,{className:"w-4 h-4 text-emerald-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-slate-400 text-sm leading-tight",children:o.delivery_address})]}),o.distance!==null&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-slate-700/50 rounded-lg",children:[e.jsx(pe,{className:"w-3 h-3 text-blue-400"}),e.jsxs("span",{className:"text-blue-400 text-sm font-medium",children:[o.distance.toFixed(1)," km"]}),e.jsx("span",{className:"text-slate-500 text-xs",children:"away"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-amber-500/10 border border-amber-500/20 rounded-lg",children:[e.jsx(ze,{className:"w-3 h-3 text-amber-400"}),e.jsx("span",{className:"text-amber-400 text-sm font-medium",children:ia(o.distance,l).timeWindow}),l&&e.jsx("span",{className:"text-amber-500/70 text-[10px]",children:"ðŸš—"})]})]})]}),e.jsxs("div",{className:"px-4 pb-4 pt-0 flex gap-2",children:[o.status==="assigned"?e.jsxs(e.Fragment,{children:[e.jsxs(y,{size:"sm",className:"flex-1 bg-emerald-500 hover:bg-emerald-600 text-white h-9",onClick:()=>ie(o.id),children:[e.jsx(re,{className:"w-4 h-4 mr-1.5"}),"Pick Up"]}),e.jsx(y,{size:"sm",variant:"ghost",className:"h-9 px-3 text-slate-400 hover:text-white hover:bg-slate-700",onClick:()=>V(o),title:"Show on map",children:e.jsx(xe,{className:"w-4 h-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsxs(y,{size:"sm",className:"flex-1 bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white h-9 shadow-lg shadow-emerald-500/20",onClick:()=>G(o.id),disabled:m===o.id,children:[m===o.id?e.jsx(Ae,{className:"w-4 h-4 mr-1.5 animate-spin"}):e.jsx(Ve,{className:"w-4 h-4 mr-1.5"}),"Mark Delivered"]}),e.jsx(y,{size:"sm",variant:"ghost",className:"h-9 px-3 text-slate-400 hover:text-white hover:bg-slate-700",onClick:()=>V(o),title:"Show on map",children:e.jsx(xe,{className:"w-4 h-4"})})]}),e.jsx(y,{size:"sm",variant:"ghost",className:"h-9 px-3 text-red-400 hover:text-red-300 hover:bg-red-500/10",onClick:()=>ve(o.id),children:e.jsx(Ce,{className:"w-4 h-4"})})]})]},o.id))})}),e.jsx("div",{className:"p-4 border-t border-slate-800/50 bg-slate-900/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${R?"bg-emerald-500/20":"bg-slate-700"}`,children:e.jsx(cs,{className:`w-4 h-4 ${R?"text-emerald-400":"text-slate-500"}`})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white text-sm font-medium",children:R?"Location Active":"Locating..."}),e.jsx("div",{className:"text-slate-500 text-xs",children:R?`${R[0].toFixed(4)}, ${R[1].toFixed(4)}`:"Getting GPS signal"})]})]}),e.jsx(Je,{checked:s,onCheckedChange:a})]})})]})]})}function ca({onLoginSuccess:t,onNavigateToSignup:s,onBack:a}){const[l,d]=n.useState(""),[c,h]=n.useState(""),[g,A]=n.useState(!1),[b,S]=n.useState(!1),[r,u]=n.useState(""),w=async v=>{var m,C;v.preventDefault(),S(!0),u("");try{const x=await Ke({email:l,password:c});if(x.role!=="admin"){u("Access denied. Not an admin account.");return}localStorage.setItem("token",x.access_token),localStorage.setItem("user",JSON.stringify(x)),t(x)}catch(x){u(((C=(m=x.response)==null?void 0:m.data)==null?void 0:C.detail)||"Login failed")}finally{S(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 flex items-center justify-center p-4 overflow-hidden relative",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-1/3 -left-20 w-80 h-80 bg-purple-500/10 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/3 -right-20 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),a&&e.jsxs(y,{variant:"ghost",onClick:a,className:"absolute top-4 left-4 text-slate-400 hover:text-white z-10",children:[e.jsx(ge,{className:"w-5 h-5 mr-2"}),"Back"]}),e.jsxs(L,{className:"w-full max-w-md bg-slate-900/80 backdrop-blur-xl border-slate-800 p-8 relative z-10 animate-scale-up shadow-2xl shadow-purple-500/5",children:[e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[e.jsx("div",{className:"flex items-center gap-2 mb-6"}),e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mb-4 shadow-lg shadow-purple-500/30",children:e.jsx(Ge,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Admin Portal"}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Sign in to manage your fleet"})]}),e.jsxs("form",{onSubmit:w,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{className:"text-slate-300 text-sm",children:"Email Address"}),e.jsx(P,{type:"email",value:l,onChange:v=>d(v.target.value),placeholder:"admin@example.com",className:"bg-slate-800/50 border-slate-700 text-white h-12 focus:border-purple-500 focus:ring-purple-500/20 transition-all placeholder:text-slate-500",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{className:"text-slate-300 text-sm",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{type:g?"text":"password",value:c,onChange:v=>h(v.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"bg-slate-800/50 border-slate-700 text-white h-12 pr-10 focus:border-purple-500 focus:ring-purple-500/20 transition-all placeholder:text-slate-500",required:!0}),e.jsx("button",{type:"button",onClick:()=>A(!g),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white transition-colors",children:g?e.jsx(fe,{className:"w-5 h-5"}):e.jsx(oe,{className:"w-5 h-5"})})]})]}),r&&e.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:e.jsx("p",{className:"text-red-400 text-sm text-center",children:r})}),e.jsx(y,{type:"submit",className:"w-full bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white h-12 shadow-lg shadow-purple-500/30 transition-all hover:scale-[1.02]",disabled:b,children:b?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-5 h-5 animate-spin mr-2"}),"Signing in..."]}):"Sign In as Admin"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-slate-400 text-sm",children:["Need an admin account?"," ",e.jsx("button",{onClick:s,className:"text-purple-400 hover:text-purple-300 font-medium transition-colors",children:"Sign up here"})]})})]})]})}function da({onLoginSuccess:t,onNavigateToSignup:s,onBack:a}){const[l,d]=n.useState(""),[c,h]=n.useState(""),[g,A]=n.useState(!1),[b,S]=n.useState(!1),[r,u]=n.useState(""),w=async v=>{var m,C;v.preventDefault(),S(!0),u("");try{const x=await Ke({email:l,password:c});if(x.role!=="rider"){u("Access denied. Not a rider account.");return}localStorage.setItem("token",x.access_token),localStorage.setItem("user",JSON.stringify(x)),t(x)}catch(x){u(((C=(m=x.response)==null?void 0:m.data)==null?void 0:C.detail)||"Login failed")}finally{S(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 flex items-center justify-center p-4 overflow-hidden relative",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-1/3 -left-20 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/3 -right-20 w-80 h-80 bg-blue-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),a&&e.jsxs(y,{variant:"ghost",onClick:a,className:"absolute top-4 left-4 text-slate-400 hover:text-white z-10",children:[e.jsx(ge,{className:"w-5 h-5 mr-2"}),"Back"]}),e.jsxs(L,{className:"w-full max-w-md bg-slate-900/80 backdrop-blur-xl border-slate-800 p-8 relative z-10 animate-scale-up shadow-2xl shadow-emerald-500/5",children:[e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[e.jsx("div",{className:"flex items-center gap-2 mb-6"}),e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl flex items-center justify-center mb-4 shadow-lg shadow-emerald-500/30",children:e.jsx(ne,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Rider Login"}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Start your delivery shift"})]}),e.jsxs("form",{onSubmit:w,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{className:"text-slate-300 text-sm",children:"Email Address"}),e.jsx(P,{type:"email",value:l,onChange:v=>d(v.target.value),placeholder:"rider@example.com",className:"bg-slate-800/50 border-slate-700 text-white h-12 focus:border-emerald-500 focus:ring-emerald-500/20 transition-all placeholder:text-slate-500",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{className:"text-slate-300 text-sm",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{type:g?"text":"password",value:c,onChange:v=>h(v.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"bg-slate-800/50 border-slate-700 text-white h-12 pr-10 focus:border-emerald-500 focus:ring-emerald-500/20 transition-all placeholder:text-slate-500",required:!0}),e.jsx("button",{type:"button",onClick:()=>A(!g),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white transition-colors",children:g?e.jsx(fe,{className:"w-5 h-5"}):e.jsx(oe,{className:"w-5 h-5"})})]})]}),r&&e.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:e.jsx("p",{className:"text-red-400 text-sm text-center",children:r})}),e.jsx(y,{type:"submit",className:"w-full bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white h-12 shadow-lg shadow-emerald-500/30 transition-all hover:scale-[1.02]",disabled:b,children:b?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-5 h-5 animate-spin mr-2"}),"Signing in..."]}):"Sign In as Rider"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-slate-400 text-sm",children:["New rider?"," ",e.jsx("button",{onClick:s,className:"text-emerald-400 hover:text-emerald-300 font-medium transition-colors",children:"Sign up here"})]})})]})]})}function ma({onSignupSuccess:t,onNavigateToLogin:s}){const[a,l]=n.useState(""),[d,c]=n.useState(""),[h,g]=n.useState(""),[A,b]=n.useState(!1),[S,r]=n.useState(!1),[u,w]=n.useState(""),v=async m=>{var C,x;m.preventDefault(),r(!0),w("");try{const N=await Ye({name:a,email:d,password:h,role:"admin"});localStorage.setItem("token",N.access_token),localStorage.setItem("user",JSON.stringify(N)),t(N)}catch(N){w(((x=(C=N.response)==null?void 0:C.data)==null?void 0:x.detail)||"Signup failed")}finally{r(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 flex items-center justify-center p-4 overflow-hidden relative",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-1/3 -left-20 w-80 h-80 bg-purple-500/10 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/3 -right-20 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),e.jsxs(L,{className:"w-full max-w-md bg-slate-900/80 backdrop-blur-xl border-slate-800 p-8 relative z-10 animate-scale-up shadow-2xl shadow-purple-500/5",children:[e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-emerald-500 to-blue-500 rounded-lg flex items-center justify-center",children:e.jsx(le,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-lg font-bold text-white",children:"GraphHopper"})]}),e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mb-4 shadow-lg shadow-purple-500/30",children:e.jsx(Ge,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Create Admin Account"}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Manage your delivery fleet"})]}),e.jsxs("form",{onSubmit:v,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{className:"text-slate-300 text-sm",children:"Full Name"}),e.jsx(P,{value:a,onChange:m=>l(m.target.value),placeholder:"John Doe",className:"bg-slate-800/50 border-slate-700 text-white h-12 focus:border-purple-500 focus:ring-purple-500/20 transition-all placeholder:text-slate-500",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{className:"text-slate-300 text-sm",children:"Email Address"}),e.jsx(P,{type:"email",value:d,onChange:m=>c(m.target.value),placeholder:"admin@example.com",className:"bg-slate-800/50 border-slate-700 text-white h-12 focus:border-purple-500 focus:ring-purple-500/20 transition-all placeholder:text-slate-500",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{className:"text-slate-300 text-sm",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{type:A?"text":"password",value:h,onChange:m=>g(m.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"bg-slate-800/50 border-slate-700 text-white h-12 pr-10 focus:border-purple-500 focus:ring-purple-500/20 transition-all placeholder:text-slate-500",required:!0}),e.jsx("button",{type:"button",onClick:()=>b(!A),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white transition-colors",children:A?e.jsx(fe,{className:"w-5 h-5"}):e.jsx(oe,{className:"w-5 h-5"})})]})]}),u&&e.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:e.jsx("p",{className:"text-red-400 text-sm text-center",children:u})}),e.jsx(y,{type:"submit",className:"w-full bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white h-12 shadow-lg shadow-purple-500/30 transition-all hover:scale-[1.02]",disabled:S,children:S?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-5 h-5 animate-spin mr-2"}),"Creating Account..."]}):"Create Admin Account"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-slate-400 text-sm",children:["Already have an account?"," ",e.jsx("button",{onClick:s,className:"text-purple-400 hover:text-purple-300 font-medium transition-colors",children:"Sign in here"})]})})]})]})}function xa({onSignupSuccess:t,onNavigateToLogin:s}){const[a,l]=n.useState(""),[d,c]=n.useState(""),[h,g]=n.useState(""),[A,b]=n.useState(!1),[S,r]=n.useState(!1),[u,w]=n.useState(""),v=async m=>{var C,x;m.preventDefault(),r(!0),w("");try{const N=await Ye({name:a,email:d,password:h,role:"rider"});localStorage.setItem("token",N.access_token),localStorage.setItem("user",JSON.stringify(N)),t(N)}catch(N){w(((x=(C=N.response)==null?void 0:C.data)==null?void 0:x.detail)||"Signup failed")}finally{r(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 flex items-center justify-center p-4 overflow-hidden relative",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-1/3 -left-20 w-80 h-80 bg-emerald-500/10 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/3 -right-20 w-80 h-80 bg-blue-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),e.jsxs(L,{className:"w-full max-w-md bg-slate-900/80 backdrop-blur-xl border-slate-800 p-8 relative z-10 animate-scale-up shadow-2xl shadow-emerald-500/5",children:[e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-emerald-500 to-blue-500 rounded-lg flex items-center justify-center",children:e.jsx(le,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-lg font-bold text-white",children:"GraphHopper"})]}),e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl flex items-center justify-center mb-4 shadow-lg shadow-emerald-500/30",children:e.jsx(ne,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Create Rider Account"}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Join the delivery fleet today"})]}),e.jsxs("form",{onSubmit:v,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{className:"text-slate-300 text-sm",children:"Full Name"}),e.jsx(P,{value:a,onChange:m=>l(m.target.value),placeholder:"John Doe",className:"bg-slate-800/50 border-slate-700 text-white h-12 focus:border-emerald-500 focus:ring-emerald-500/20 transition-all placeholder:text-slate-500",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{className:"text-slate-300 text-sm",children:"Email Address"}),e.jsx(P,{type:"email",value:d,onChange:m=>c(m.target.value),placeholder:"rider@example.com",className:"bg-slate-800/50 border-slate-700 text-white h-12 focus:border-emerald-500 focus:ring-emerald-500/20 transition-all placeholder:text-slate-500",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{className:"text-slate-300 text-sm",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{type:A?"text":"password",value:h,onChange:m=>g(m.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"bg-slate-800/50 border-slate-700 text-white h-12 pr-10 focus:border-emerald-500 focus:ring-emerald-500/20 transition-all placeholder:text-slate-500",required:!0}),e.jsx("button",{type:"button",onClick:()=>b(!A),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white transition-colors",children:A?e.jsx(fe,{className:"w-5 h-5"}):e.jsx(oe,{className:"w-5 h-5"})})]})]}),u&&e.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:e.jsx("p",{className:"text-red-400 text-sm text-center",children:u})}),e.jsx(y,{type:"submit",className:"w-full bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white h-12 shadow-lg shadow-emerald-500/30 transition-all hover:scale-[1.02]",disabled:S,children:S?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-5 h-5 animate-spin mr-2"}),"Creating Account..."]}):"Create Rider Account"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-slate-400 text-sm",children:["Already have an account?"," ",e.jsx("button",{onClick:s,className:"text-emerald-400 hover:text-emerald-300 font-medium transition-colors",children:"Sign in here"})]})})]})]})}function Be({children:t,requiredRole:s}){const a=localStorage.getItem("user"),l=localStorage.getItem("token");console.log("ProtectedRoute: checking auth",{hasUser:!!a,hasToken:!!l,requiredRole:s});const d=a?JSON.parse(a):null;return!d||!l?(console.log("ProtectedRoute: No user or token, redirecting to /"),e.jsx(Se,{to:"/",replace:!0})):s&&d.role!==s?(console.log("ProtectedRoute: Role mismatch",{userRole:d.role,requiredRole:s}),e.jsx(Se,{to:"/",replace:!0})):(console.log("ProtectedRoute: Auth passed, rendering children"),e.jsx(e.Fragment,{children:t}))}function ha(){const t=se(),s=a=>{t(`/${a}`)};return e.jsx(_s,{onNavigate:s})}function ua(){const t=se(),s=d=>{localStorage.setItem("user",JSON.stringify(d)),localStorage.setItem("token",d.access_token),t("/admin-dashboard")},a=()=>{t("/admin-signup")},l=()=>{t("/")};return e.jsx(ca,{onLoginSuccess:s,onNavigateToSignup:a,onBack:l})}function pa(){const t=se(),s=l=>{localStorage.setItem("user",JSON.stringify(l)),localStorage.setItem("token",l.access_token),t("/admin-dashboard")},a=()=>{t("/admin-login")};return e.jsx(ma,{onSignupSuccess:s,onNavigateToLogin:a})}function ga(){const t=se(),s=d=>{localStorage.setItem("user",JSON.stringify(d)),localStorage.setItem("token",d.access_token),t("/rider-dashboard")},a=()=>{t("/rider-signup")},l=()=>{t("/")};return e.jsx(da,{onLoginSuccess:s,onNavigateToSignup:a,onBack:l})}function fa(){const t=se(),s=l=>{localStorage.setItem("user",JSON.stringify(l)),localStorage.setItem("token",l.access_token),t("/rider-dashboard")},a=()=>{t("/rider-login")};return e.jsx(xa,{onSignupSuccess:s,onNavigateToLogin:a})}function ba(){const t=se(),s=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/")};return e.jsx(la,{onBack:s})}function va(){const t=se(),s=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/")};return e.jsx(oa,{onBack:s})}function ja(){return e.jsx(zt,{children:e.jsx("div",{className:"h-full w-full min-h-screen bg-slate-950",children:e.jsxs(Mt,{children:[e.jsx(Z,{path:"/",element:e.jsx(ha,{})}),e.jsx(Z,{path:"/admin-login",element:e.jsx(ua,{})}),e.jsx(Z,{path:"/admin-signup",element:e.jsx(pa,{})}),e.jsx(Z,{path:"/rider-login",element:e.jsx(ga,{})}),e.jsx(Z,{path:"/rider-signup",element:e.jsx(fa,{})}),e.jsx(Z,{path:"/admin-dashboard",element:e.jsx(Be,{requiredRole:"admin",children:e.jsx(ba,{})})}),e.jsx(Z,{path:"/rider-dashboard",element:e.jsx(Be,{requiredRole:"rider",children:e.jsx(va,{})})}),e.jsx(Z,{path:"*",element:e.jsx(Se,{to:"/",replace:!0})})]})})})}const tt=document.getElementById("root");if(!tt)throw new Error("Root element not found");Lt.createRoot(tt).render(e.jsx(n.StrictMode,{children:e.jsx(ja,{})}));
